Started by user [8mha:////4EubDzcc5+rlsLvkKzUGX9HGHvL3A7UoTK0UQk+uhfcJAAAAoB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAy+EgYR/dLi1CL9lNSy/ILi+KzUvOzMvGIAwgdRX8kAAAA=[0mDevOps Jenkins
Building remotely on [8mha:////4Po+JysJaFaEK6+h8448JvYlzP1oI4ZPnSS0zrOUlYObAAAAph+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAyhEgYZ/eT83ILSktQifce84syknFSg+pKi/Bw/oKsBGzKZtdEAAAA=[0mAnsibleControlNode in workspace /opt/jenkins/workspace/Java DevOps/sbx-webapp-deploy
[sbx-webapp-deploy] $ ansible-playbook /opt/ansible/tomcat-deploy.yml -i /opt/ansible/aws-hosts -f 5 --private-key /tmp/ssh6312123670479560948.key -u ec2-user

PLAY [tomcat-webserver] ********************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [ec2-54-197-37-36.compute-1.amazonaws.com][0m

TASK [remove web dir contents] *************************************************
[0;33mchanged: [ec2-54-197-37-36.compute-1.amazonaws.com] => (item=sbx-java-webapp.war)[0m
[0;33mchanged: [ec2-54-197-37-36.compute-1.amazonaws.com] => (item=sbx-java-webapp)[0m

TASK [debug] *******************************************************************
[0;32mok: [ec2-54-197-37-36.compute-1.amazonaws.com] => {[0m
[0;32m    "cleanup_result": {[0m
[0;32m        "changed": true, [0m
[0;32m        "msg": "All items completed", [0m
[0;32m        "results": [[0m
[0;32m            {[0m
[0;32m                "_ansible_item_result": true, [0m
[0;32m                "_ansible_no_log": false, [0m
[0;32m                "_ansible_parsed": true, [0m
[0;32m                "changed": true, [0m
[0;32m                "diff": {[0m
[0;32m                    "after": {[0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp.war", [0m
[0;32m                        "state": "absent"[0m
[0;32m                    }, [0m
[0;32m                    "before": {[0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp.war", [0m
[0;32m                        "state": "file"[0m
[0;32m                    }[0m
[0;32m                }, [0m
[0;32m                "invocation": {[0m
[0;32m                    "module_args": {[0m
[0;32m                        "attributes": null, [0m
[0;32m                        "backup": null, [0m
[0;32m                        "content": null, [0m
[0;32m                        "delimiter": null, [0m
[0;32m                        "diff_peek": null, [0m
[0;32m                        "directory_mode": null, [0m
[0;32m                        "follow": false, [0m
[0;32m                        "force": false, [0m
[0;32m                        "group": null, [0m
[0;32m                        "mode": null, [0m
[0;32m                        "original_basename": null, [0m
[0;32m                        "owner": null, [0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp.war", [0m
[0;32m                        "recurse": false, [0m
[0;32m                        "regexp": null, [0m
[0;32m                        "remote_src": null, [0m
[0;32m                        "selevel": null, [0m
[0;32m                        "serole": null, [0m
[0;32m                        "setype": null, [0m
[0;32m                        "seuser": null, [0m
[0;32m                        "src": null, [0m
[0;32m                        "state": "absent", [0m
[0;32m                        "unsafe_writes": null, [0m
[0;32m                        "validate": null[0m
[0;32m                    }[0m
[0;32m                }, [0m
[0;32m                "item": "sbx-java-webapp.war", [0m
[0;32m                "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp.war", [0m
[0;32m                "state": "absent"[0m
[0;32m            }, [0m
[0;32m            {[0m
[0;32m                "_ansible_item_result": true, [0m
[0;32m                "_ansible_no_log": false, [0m
[0;32m                "_ansible_parsed": true, [0m
[0;32m                "changed": true, [0m
[0;32m                "diff": {[0m
[0;32m                    "after": {[0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp", [0m
[0;32m                        "state": "absent"[0m
[0;32m                    }, [0m
[0;32m                    "before": {[0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp", [0m
[0;32m                        "state": "directory"[0m
[0;32m                    }[0m
[0;32m                }, [0m
[0;32m                "invocation": {[0m
[0;32m                    "module_args": {[0m
[0;32m                        "attributes": null, [0m
[0;32m                        "backup": null, [0m
[0;32m                        "content": null, [0m
[0;32m                        "delimiter": null, [0m
[0;32m                        "diff_peek": null, [0m
[0;32m                        "directory_mode": null, [0m
[0;32m                        "follow": false, [0m
[0;32m                        "force": false, [0m
[0;32m                        "group": null, [0m
[0;32m                        "mode": null, [0m
[0;32m                        "original_basename": null, [0m
[0;32m                        "owner": null, [0m
[0;32m                        "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp", [0m
[0;32m                        "recurse": false, [0m
[0;32m                        "regexp": null, [0m
[0;32m                        "remote_src": null, [0m
[0;32m                        "selevel": null, [0m
[0;32m                        "serole": null, [0m
[0;32m                        "setype": null, [0m
[0;32m                        "seuser": null, [0m
[0;32m                        "src": null, [0m
[0;32m                        "state": "absent", [0m
[0;32m                        "unsafe_writes": null, [0m
[0;32m                        "validate": null[0m
[0;32m                    }[0m
[0;32m                }, [0m
[0;32m                "item": "sbx-java-webapp", [0m
[0;32m                "path": "/opt/apache-tomcat-7.0.61/webapps/sbx-java-webapp", [0m
[0;32m                "state": "absent"[0m
[0;32m            }[0m
[0;32m        ][0m
[0;32m    }[0m
[0;32m}[0m

TASK [stop tomcat] *************************************************************
[0;33mchanged: [ec2-54-197-37-36.compute-1.amazonaws.com][0m

TASK [debug] *******************************************************************
[0;32mok: [ec2-54-197-37-36.compute-1.amazonaws.com] => {[0m
[0;32m    "stop_result": {[0m
[0;32m        "changed": true, [0m
[0;32m        "cmd": [[0m
[0;32m            "/opt/apache-tomcat-7.0.61/bin/shutdown.sh"[0m
[0;32m        ], [0m
[0;32m        "delta": "0:00:00.379664", [0m
[0;32m        "end": "2017-09-10 08:41:53.040873", [0m
[0;32m        "rc": 0, [0m
[0;32m        "start": "2017-09-10 08:41:52.661209", [0m
[0;32m        "stderr": "", [0m
[0;32m        "stderr_lines": [], [0m
[0;32m        "stdout": "", [0m
[0;32m        "stdout_lines": [][0m
[0;32m    }[0m
[0;32m}[0m

TASK [download webapp war from nexus to webapps deploy directory] **************
[0;33mchanged: [ec2-54-197-37-36.compute-1.amazonaws.com][0m

TASK [start tomcat] ************************************************************
[0;33mchanged: [ec2-54-197-37-36.compute-1.amazonaws.com][0m

TASK [debug] *******************************************************************
[0;32mok: [ec2-54-197-37-36.compute-1.amazonaws.com] => {[0m
[0;32m    "start_result": {[0m
[0;32m        "changed": true, [0m
[0;32m        "cmd": [[0m
[0;32m            "nohup", [0m
[0;32m            "/opt/apache-tomcat-7.0.61/bin/startup.sh"[0m
[0;32m        ], [0m
[0;32m        "delta": "0:00:00.019590", [0m
[0;32m        "end": "2017-09-10 08:41:53.866033", [0m
[0;32m        "rc": 0, [0m
[0;32m        "start": "2017-09-10 08:41:53.846443", [0m
[0;32m        "stderr": "", [0m
[0;32m        "stderr_lines": [], [0m
[0;32m        "stdout": "Tomcat started.", [0m
[0;32m        "stdout_lines": [[0m
[0;32m            "Tomcat started."[0m
[0;32m        ][0m
[0;32m    }[0m
[0;32m}[0m

PLAY RECAP *********************************************************************
[0;33mec2-54-197-37-36.compute-1.amazonaws.com[0m : [0;32mok=8   [0m [0;33mchanged=4   [0m unreachable=0    failed=0   

Finished: SUCCESS
